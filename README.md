# CodeToFlow: AI-Powered UML Diagram Generator


This project provides a FastAPI-based backend that leverages LangGraph and Ollama to analyze a code repository and generate a UML diagram in Mermaid.js format. The diagram is rendered as an image using a local Mermaid renderer (mermaid-cli) and saved in a `site/{project_name}/` folder for easy access and reuse.

**Offline/Local-First:**
- All core features (code analysis, UML generation, diagram rendering) work fully offline.
- No internet is required for rendering or analysis if you use local repositories and have Ollama and mermaid-cli installed.

- **Clone or Use Local Repository**: Accepts a GitHub URL to clone or a local path to use as the codebase, via separate endpoints.
- **AI-Powered Code Analysis**: Uses LangGraph workflow and Ollama LLM to analyze the codebase and generate a suitable UML diagram in Mermaid.js format.
- **Offline Diagram Rendering**: Converts the Mermaid.js diagram to an SVG image using local mermaid-cli (no internet required).
- **Reusable Output**: Saves both the Mermaid code and the rendered image in a `site/{project_name}/` folder for prompt reusability and easy sharing.
- **REST API Endpoints**: Exposes endpoints to trigger analysis, retrieve the UML image, and get the raw Mermaid code.


## API Endpoints

- `POST /repo/clone` — Clone a GitHub repo. Request body:
  ```json
  { "repo_url": "<git_url>" }
  ```
- `POST /repo/local` — Use a local project path. Request body:
  ```json
  { "local_path": "<absolute_path_to_project>" }
  ```
- `POST /analyze` — Analyze the codebase and generate UML. Request body:
  ```json
  { "project_name": "<repo_folder_name>" }
  ```
- `GET /uml/{project_name}` — Retrieve the generated UML SVG image.
- `GET /uml/{project_name}/mermaid` — Retrieve the raw Mermaid.js code.

## How It Works

1. **Repository Setup**: Clone a remote repo or copy a local folder into the workspace.
2. **Code Analysis**: The backend uses LangGraph and Ollama to analyze the code and generate a Mermaid.js UML diagram.
3. **Diagram Rendering**: The Mermaid code is rendered to an SVG image and saved in `site/{project_name}/uml.svg`.
4. **Prompt Reusability**: Both the Mermaid code and the image are available for reuse in prompts, documentation, or sharing.


## Requirements
- Python 3.8+
- FastAPI
- LangGraph
- Ollama (running locally with model downloaded)
- Node.js
- mermaid-cli (install with `npm install -g @mermaid-js/mermaid-cli`)

Install Python dependencies:
```bash
pip install -r requirements.txt
```



## Notes
- Ollama must be running and accessible at the configured API URL (locally for offline use).
- Mermaid rendering uses local mermaid-cli (mmdc) and does not require internet.
- The system is designed for extensibility and prompt-driven workflows.

---

**Status:** All features are implemented and documented for offline/local-first operation.

---

*Generated by GitHub Copilot on 2025-09-20 for prompt reusability and workflow clarity.*
